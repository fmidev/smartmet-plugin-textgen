misc:
{

	#formatter			= "debug";
	#formatter			= "plain";
	#formatter			= "plainlines";
	formatter			= "html";
	#formatter			= "css";
	#formatter			= "sonera";
	#formatter			= "wml";
};

# unit format definitions
unit_format:
{
	celsius		= "phrase";
	meterspersecond	= "textphrase";
	millimeters	= "phrase";
	percent		= "phrase";
};

# querydata definitons
querydata:
{
        pal_skandinavia_pintahistoria = "/smartmet/data/pal/skandinavia/pintahistoria/querydata/";
        pal_skandinavia_maanpinta = "/smartmet/data/pal/skandinavia/maanpinta/querydata/";
        kriging_suomi_snow = "/smartmet/data/kriging/suomi/snow/querydata/";
        pal_suomi_kasvukausi = "/smartmet/data/pal/suomi/kasvukausi/querydata/";
        klimatologia = "/smartmet/data/climate/suomi/daily/querydata/tmax_textgen.sqd";
	roadmodel = "/smartmet/data/roadmodel/suomi/pinta/querydata/";
};

# forecast data definitions
forecast_data:
{
        default_forecast                        = "use querydata.pal_skandinavia_pintahistoria";

        severefrost_forecast                    = "use querydata.pal_skandinavia_maanpinta";
        frost_forecast                          = "use querydata.pal_skandinavia_maanpinta";
        effectivetemperaturesum_forecast        = "use querydata.pal_suomi_kasvukausi";
        waterequivalentofsnow_forecast          = "use querydata.kriging_suomi_snow";
        fractiles_climatology                   = "use querydata.klimatologia";

	roadtemperature_forecast		= "use querydata.roadmodel";
	roadcondition_forecast			= "use querydata.roadmodel";
};

mask:
{
  coast = "/smartmet/share/textgendata/maps/merialueet/rannikko.svg:10";
  land = "Finland";
};

# ----------------------------------------------------------------------
# Tekstin kontrollointi
# ----------------------------------------------------------------------

output_document:
{
	sections = ["title","text_editor","precipitation_part","part1a","part1b","part2a","part2b","part3"];

	common_settings:
	{
		timesettings:
		{
			night:
			{
				starthour = 18;
				maxstarthour = 23;
				endhour = 6;
			};
			day:
			{
				starthour = 6;
				maxstarthour = 12;
				endhour = 18;
			};
		};

		seasonal_settings:
		{
			wintertime:
			{
				day:
				{
					temperature_max_interval = 5;
					temperature_clamp_down = false;
				};
				night:
				{
					temperature_max_interval = 5;
					temperature_clamp_down = false;
				};
				morning_temperature:
				{
					starthour = 8;
					endhour = 8;
				};			
				day_temperature:
				{
					starthour = 14;
					endhour = 14;
				};
			};
			summertime:
			{
				day:
				{
					temperature_max_interval = 5;
					temperature_clamp_down = true;
				};
				night:
				{
					temperature_max_interval = 5;
					temperature_clamp_down = true;
				};
				morning_temperature:
				{
					starthour = 8;
					endhour = 8;
				};
				day_temperature:
				{
					starthour = 13;
					endhour = 17;
				};
			
				startdate = "0401";
				enddate = "0930";
			};
		};
	};

	title:
	{
	        period:	
		{ 
		  type = "now";	
		  days = 0;
		  endhour = 0;
		  switchhour = 11;
		};
	        header: 
		{ 
		  type		= "report_area";
		  colon		= false;
	          html: { level = 2; };
		};
		content	= "none";
	};

	text_editor:
	{

		period: 
		{ 
			type = "until"; 
			days = 0;
			starthour = 6;
			endhour = 18;
			switchhour = 11;
		};
		header:
		{
			type = "none";
		};

		content = ["text_forecaster","text_name"];

		story:
		{
	
			text_forecaster:
			{
				value = "Meteorologi:";
			};


			text_name:
			{
				value = "@/smartmet/data/old/pal/txt/pal/ely/utf8/ely_editoija.txt";
			};

			
		};
			
	};

	precipitation_part:
	{

		period: 
		{ 
			type = "until"; 
			days = 0;
			starthour = 6;
			endhour = 18;
			switchhour = 11;
		};
		header:
		{
			type = "until";
			colon = true;
			html: { level = 4; };
		};

		content = ["pop_days","precipitation_sums"];

		story:
		{
			pop_days:
			{
				day:
				{
					starthour = 0;
					endhour = 0;
			        	maxstarthour = 12;
			        	minendhour = 18;
				};

				today:
				{
					phrases = ["today","tomorrow","weekday"];
				};

				next_day:
				{
					phrases = ["tomorrow","followingday"];
				};

	        		precision = 10;
	        		minimum	 = 10;
				maximum = 90;

				comparison: 
				{
	
					significantly_greater = 50;
					greater = 20;
		        		somewhat_greater = 10;
		        		somewhat_smaller = 10;
	        			smaller = 20;
					significantly_smaller = 50;
				};

			};

			precipitation_sums:
			{
				minrain = 0.05;
				mininterval = 2;
			
			};

		};


	};

	part1a:
	{
		period: 
		{ 
			type = "until"; 
			days = 0;
			starthour = 6;
			endhour = 18;
			switchhour = 11;
		};


		header:
		{
			type = "none";
		};

		content = ["weather_forecast","temperature_anomaly","temperature_max36hours","wind_daily_ranges"];
		
		story:
		{
			weather_forecast:
			{
				timesettings = "use output_document.common_settings.timesettings";

				day:
				{
					starthour = 11;
					maxstarthour = 12;
					endhour = 17;
					minendhour = 15;
				};

				dry_weather_limit = 0.0125; // mm/h
				generally_limit = 90;	// percentage
				someplaces_limit = 10;	// percentage
				manyplaces_limit = 50;	// percentage

				specify_part_of_the_day = true;

				today: { phrases = "today"; };
				next_day: { phrases = "weekday"; };
				tonight: { phrases = "weekday"; };
				next_night: { phrases = "weekday"; };
			};

			temperature_anomaly:
			{
				timesettings = "use output_document.common_settings.timesettings";
				seasonal_settings = "use output_document.common_settings.seasonal_settings";

				today: { phrases = "today"; };
				next_day: { phrases = "weekday"; };
				tonight: { phrases = "weekday"; };
				next_night: { phrases = "weekday"; };
			};

			temperature_max36hours:
			{
				timesettings = "use output_document.common_settings.timesettings";
				seasonal_settings = "use output_document.common_settings.seasonal_settings";

				frost_story = "frost_onenight";
				tonight: { phrases = "none!"; };
				areas_to_split = "lappi";
			};

			wind_daily_ranges:
			{
				day:
				{
					starthour = 0;
					maxstarthour = 16;
					endhour = 0;
					minendhour = 18;
				};

				mininterval = 0;

				same:
				{
					minimum = 1;
					maximum = 1;
				};

				direction:
				{
					accurate = 22.5;
					variable = 45;
				};

				today: { phrases = "today,tomorrow,weekday"; };
				next_day: { phrases = "tomorrow,weekday"; };
				next_days: { phrases = "tomorrow,weekday"; };
			};
			frost_onenight:
			{
				night: 
				{ 
				  starthour = 18; 
				  endhour = 6;
				};

				not_after_date = "1015";

        			required_growing_season_percentage:
				{
					default = 33.333;
					lappi = 50.0;
					merilappi = 50.0;
					lapin-laani = 50.0;
					tiepiiri-yla-lappi = 50.0;
        				tiepiiri-kasivarsi = 50.0;
        				lansi-lappi = 50.0;
        				ita-lappi = 50.0;
				};
				
				required_night_frost_percentage = 20.0;
				required_severe_frost_probability = 20.0;
			};
		};
	};

	part1b:
	{
		period:
		{
			period = "use output_document.part1a.period";
		};
		header:
		{
			type = "none";
		};

		content = ["roadtemperature_daynightranges", "roadcondition_overview"];
		
		story:
		{
			roadtemperature_daynightranges:
			{
				today:
				{
					phrases: "today,tomorrow,weekday";
				};
				tonight:
				{
					phrases: "tonight,atnight,weekday";
				};
				day:
				{
					starthour = 6;
					endhour = 18;
					maxstarthour = 12;
					minendhour = 18;
				};
				night:
				{
					maxstarthour = 21;
				};
				maxperiods = 3;
				mininterval = 2;
				always_interval_zero = true;
			};

			roadcondition_overview:
			{
				generally_limit = 90;
				manyplaces_limit = 50;
				someplaces_limit = 5;
				maxhours = 30;
				morning:	{ starthour = 6; };
				day:		{ starthour = 9; };
				evening:	{ starthour = 18; };
				night:		{ starthour = 22; };
				
			};
		};
	};

	part2a:
	{
		content = ["weather_forecast","temperature_anomaly","temperature_max36hours","wind_daily_ranges"];

		period: 
		{ 
			type = "from_until"; 
			startday = 0;
			starthour = 18;
			endhour = 18;
			switchhour = 11;
			days = 1;
		};
		header:
		{
			type = "from_until";
			colon = true;
			html: { level = 4; };
		};
		story:
		{
			story = "use output_document.part1a.story";
		};
	};

	part2b:
	{
		period:
		{
			period = "use output_document.part2a.period";
		};

		header:	{ type = "none"; };

		content = ["roadtemperature_daynightranges", "roadcondition_overview"];
		
		story:
		{
			story = "use output_document.part1b.story";
		};
	};

	part3:
	{
		period:
		{
			type = "from_until";
			starthour = 18;
			startday = 1;
			switchhour = 11;
			days = 4;
			endhour = 6;
		};

		header:
		{
			type = "from_until";
			colon = true;
			html:
			{
				level = 4;
			};
		};

		content = ["weather_shortoverview", "temperature_weekly_minmax", "precipitation_range"];

		story:
		{
			weather_shortoverview:
			{
				cloudiness:
				{
					fullrange = false;
					day:
					{
						starthour = 6;
						endhour = 21;
					};
					clear = 40;
					cloudy = 70;
					single_limit = 60;
					double_limit = 85;
				};
				precipitation:
				{
					day:
					{
						starthour = 0;
						endhour = 0;
					};
					rainy_limit = 1;
					partly_rainy_limit = 0.1;
					unstable_limit = 50;
				};
			};
			temperature_weekly_minmax:
			{
				day:
				{
					starthour = 6;
					endhour = 18;
				};
				night:
				{
					starthour = 18;
					endhour = 6;
				};
			};
			temperature_weekly_averages:
			{
				day:
				{
					starthour = 6;
					endhour = 18;
				};
				night:
				{
					starthour = 18;
					endhour = 6;
				};
			};
			precipitation_range:
			{
				minrain = 0.05;
				maxrain = 20;
			};
		};
	};
};


split_the_area:
{	
	lappi:
	{
		method = "horizontal:67.42";
		criterion = "temperature_difference:4.0";
	};
};

# PostGIS database definitions
postgis:
{
	default:
	{
		host		= "gemini.fmi.fi";
		port    	= "5432";
		database	= "open_data_gis";
		username	= "open_data_gis_user";
		password	= "Ve6+HurMnX";
#		client_encoding	= "UTF8";
		client_encoding	= "latin1";
		schema		= "kap";
		table		= "tiepiirit_karkea";
		field		= "name";	
	};

	config_items = ["tiepiirit","tiealapiirit","elyalueet"];

	tiepiirit:
	{
		table	= "tiepiirit_karkea";
		field	= "name";	
	};

	tiealapiirit:
	{
		table	= "tiealapiirit_karkea";
		field	= "code";	
	};

	elyalueet:
	{
		table	= "ely_alueet";
		field	= "lyhenne";	
	};



};
